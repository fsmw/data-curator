{% extends "base.html" %}
{% block content %}
<!-- Welcome Banner -->
<div class="card card-featured mb-4">
  <div class="card-body">
    <div class="row align-items-center">
      <div class="col-md-8">
        <h3 class="text-gold mb-2">Welcome to Mises Data Curator</h3>
        <p class="text-secondary mb-3">
          Your central hub for economic data collection, processing, and analysis. 
          Access data from major international sources including OECD, World Bank, IMF, and more.
        </p>
        <div class="d-flex gap-2">
          <a href="/search" class="btn btn-primary">
            <i class="bi bi-search"></i> Search Data
          </a>
          <a href="/browse/available" class="btn btn-outline-light">
            <i class="bi bi-database"></i> Browse Sources
          </a>
        </div>
      </div>
      <div class="col-md-4 text-end d-none d-md-block">
        <i class="bi bi-bar-chart-fill text-gold" style="font-size: 5rem; opacity: 0.3;"></i>
      </div>
    </div>
  </div>
</div>

<!-- Stats Row -->
<div class="row g-3 mb-4">
  <div class="col-md-3 col-sm-6">
    <div class="stat-card">
      <div class="stat-value">{{ (stats.local_datasets if stats else 0)|default(0) }}</div>
      <div class="stat-label">Local Datasets</div>
    </div>
  </div>
  <div class="col-md-3 col-sm-6">
    <div class="stat-card">
      <div class="stat-value">5</div>
      <div class="stat-label">Data Sources</div>
    </div>
  </div>
  <div class="col-md-3 col-sm-6">
    <div class="stat-card">
      <div class="stat-value">{{ (stats.recent_downloads if stats else 0)|default(0) }}</div>
      <div class="stat-label">Recent Downloads</div>
    </div>
  </div>
  <div class="col-md-3 col-sm-6">
    <div class="stat-card">
      <div class="stat-value">{{ (stats.pending_tasks if stats else 0)|default(0) }}</div>
      <div class="stat-label">Pending Tasks</div>
    </div>
  </div>
</div>

<!-- Main Cards -->
<div class="row g-3">
  <div class="col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="card-title">
          <i class="bi bi-folder2-open"></i> Data Structure
        </h5>
      </div>
      <div class="card-body">
        <p class="text-secondary mb-3">Repository directories and their current status.</p>
        <div class="d-flex flex-column gap-2">
          <div class="d-flex justify-content-between align-items-center">
            <span><i class="bi bi-folder me-2 text-muted"></i> Raw Data</span>
            <span class="badge badge-primary badge-pill">raw</span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span><i class="bi bi-folder-check me-2 text-muted"></i> Clean Data</span>
            <span class="badge badge-success badge-pill">clean</span>
          </div>
          <div class="d-flex justify-content-between align-items-center">
            <span><i class="bi bi-file-text me-2 text-muted"></i> Metadata</span>
            <span class="badge badge-warning badge-pill">meta</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="card-title">
          <i class="bi bi-globe2"></i> Data Sources
        </h5>
      </div>
      <div class="card-body">
        <p class="text-secondary mb-3">Connected international data providers.</p>
        <div class="d-flex flex-wrap gap-2 mb-3">
          <span class="badge badge-bcch">BCCH</span>
          <span class="badge badge-oecd">OECD</span>
          <span class="badge badge-worldbank">World Bank</span>
          <span class="badge badge-fred">FRED</span>
          <span class="badge badge-info">IMF</span>
        </div>
        <span class="badge badge-success">
          <i class="bi bi-check-circle me-1"></i> All Operational
        </span>
      </div>
    </div>
  </div>
  
  <div class="col-lg-4 col-md-6">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="card-title">
          <i class="bi bi-clock-history"></i> Recent Activity
        </h5>
      </div>
      <div class="card-body">
        <p class="text-secondary mb-3">Monitor downloads and processing tasks.</p>
        {% if recent_activity %}
          <ul class="list-unstyled mb-0">
            {% for item in recent_activity[:3] %}
            <li class="d-flex align-items-center mb-2">
              <i class="bi bi-check-circle-fill text-success me-2"></i>
              <small class="text-secondary">{{ item.name }}</small>
            </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="text-center text-muted py-2">
            <i class="bi bi-inbox"></i>
            <small class="d-block mt-1">No recent activity</small>
          </div>
        {% endif %}
        <a class="btn btn-outline-primary btn-sm mt-3 w-100" href="/search">
          <i class="bi bi-search"></i> Start New Search
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Quick Links Section -->
<div class="card mt-4">
  <div class="card-header">
    <h5 class="card-title">
      <i class="bi bi-lightning"></i> Quick Links
    </h5>
  </div>
  <div class="card-body">
    <div class="row g-3">
      <div class="col-md-3 col-sm-6">
        <a href="/browse/local" class="btn btn-outline-light w-100 py-3 d-flex flex-column align-items-center">
          <i class="bi bi-hdd-stack fs-3 mb-2"></i>
          <span>Local Data</span>
        </a>
      </div>
      <div class="col-md-3 col-sm-6">
        <a href="/browse/available" class="btn btn-outline-light w-100 py-3 d-flex flex-column align-items-center">
          <i class="bi bi-cloud-download fs-3 mb-2"></i>
          <span>Available Data</span>
        </a>
      </div>
      <div class="col-md-3 col-sm-6">
        <a href="/copilot" class="btn btn-outline-light w-100 py-3 d-flex flex-column align-items-center">
          <i class="bi bi-robot fs-3 mb-2"></i>
          <span>AI Copilot</span>
        </a>
      </div>
      <div class="col-md-3 col-sm-6">
        <a href="/help" class="btn btn-outline-light w-100 py-3 d-flex flex-column align-items-center">
          <i class="bi bi-book fs-3 mb-2"></i>
          <span>Documentation</span>
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
